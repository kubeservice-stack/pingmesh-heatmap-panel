{"version":3,"sources":["../src/rendering.js"],"names":["link","scope","elem","attrs","ctrl","data","panel","find","$tooltip","$","events","on","legendType","render","setTimeout","noDataPoints","html","addecharts","option","width","height","plotCanvas","container","echartPanel","echarts","init","chartsType","pieChartsOptions","barChartsOptions","mapChartsOptions","heatmapChartsOptions","setOption","backgroundColor","css","seriesData","valueList","series","map","item","value","pop","push","name","get","geoJson","hideLoading","registerMap","tooltip","trigger","formatter","visualMap","min","max","Math","apply","text","realtime","calculable","inRange","color","type","mapType","itemStyle","normal","label","show","fontSize","emphasis","instances","_","chain","split","pingmesh","ele","replace","console","log","cache","metadata","Date","getTime","isPingFail","startsWith","jsonStrList","match","length","tags","forEach","cur","port","fromKey","targetKey","has","i","j","url","textStyle","position","padding","borderColor","borderWidth","obj","fromInstance","targetInstance","undefined","marker","animation","grid","left","right","top","bottom","xAxis","nameGap","splitArea","nameLocation","nameTextStyle","axisLine","lineStyle","axisLabel","rotate","index","yAxis","orient","splitNumber","fontStyle","fontWeight","pieces","lte","Number","delayValue","okStatusColor","gt","delayStatusColor","failStatusColor","hoverLink","shadowBlur","shadowColor","e","window","open","labelOptions","legend","legendData","Set","maxRadius","slice","radius","itemData","add","borderRadius","rich","a","lineHeight","align","hr","b","per","Array","from","labelOption","distance","verticalAlign","textBorderColor","textColor","axisPointer","axisTick","metrics","xlabel","splitLine","stack","showSymbol","hoverAnimation","incrementRenderCounter","renderingCompleted"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport $ from 'jquery';\nimport 'jquery.flot';\nimport 'jquery.flot.pie';\nimport echarts from './echarts/echarts.min';\n\nexport default function link (scope, elem, attrs, ctrl) {\n    var data;\n    var panel = ctrl.panel;\n    elem = elem.find('.echarts-panel__chart');\n    var $tooltip = $('<div id=\"tooltip\">');\n\n    ctrl.events.on('render', function () { // 触发刷新/重新加载事件\n        if (panel.legendType === 'Right side') {\n            render(false);\n            setTimeout(function () {\n                render(true);\n            }, 50);\n        } else {\n            render(true);\n        }\n    });\n\n\n    function noDataPoints () {\n        var html = '<div class=\"datapoints-warning\"><span class=\"small\">No data points</span></div>';\n        elem.html(html);\n    }\n\n    function addecharts () { // 绘图\n        let option;\n        var width = elem.width();\n        var height = ctrl.height;\n        // var size = Math.min(width, height);\n        const plotCanvas = $('<div style=\"height: 100%\"></div>');\n        elem.html(plotCanvas);\n        const container = plotCanvas[0];\n\n        var echartPanel = echarts.init(container);\n\n        if (ctrl.panel.chartsType === 'pie') {\n            option = pieChartsOptions(echartPanel)\n        } else if (ctrl.panel.chartsType === 'bar' || ctrl.panel.chartsType === 'line') {\n            option = barChartsOptions(echartPanel)\n        } else if (ctrl.panel.chartsType === 'map') {\n            option = mapChartsOptions(echartPanel);\n        } else if (ctrl.panel.chartsType === 'heatmap') {\n            option = heatmapChartsOptions(echartPanel);\n        }\n        if (option && typeof option === \"object\") {\n            echartPanel.setOption(option, true);\n        }\n        let backgroundColor = $('body').css('background-color')\n\n    }\n\n    function mapChartsOptions (echartPanel) {\n        let option = {};\n        let seriesData = [];\n        let valueList = [];\n        data.series.map(item => {\n            let value = item.data.pop().value[1];\n            valueList.push(value);\n            seriesData.push({\n                name: item.name,\n                value: value,\n            })\n        });\n        $.get('plugins/pingmesh-heatmap-panel/echarts/datav-china.json', function (geoJson) {\n            echartPanel.hideLoading();\n            echarts.registerMap('china', geoJson);\n            option = {\n                tooltip: {\n                    trigger: 'item',\n                    formatter: '{b}<br/>{c}'\n                },\n                visualMap: {\n                    min: 0,\n                    max: Math.max.apply(null, valueList) * 0.8,\n                    text: ['High', 'Low'],\n                    realtime: false,\n                    calculable: true,\n                    inRange: {\n                        color: ['rgb(200,255,255)', 'rgb(36,104,202)']\n                    }\n                },\n                series: [\n                    {\n                        type: 'map',\n                        mapType: 'china', // 自定义扩展图表类型\n                        itemStyle: {\n                            normal: {\n                                label: {\n                                    show: ctrl.panel.label.show,\n                                    fontSize: ctrl.panel.label.fontSize\n                                }\n                            },\n                            emphasis: { label: { show: true } }\n                        },\n                        data: seriesData\n                    }\n                ]\n\n            };\n            echartPanel.setOption(option, true);\n        });\n        return option;\n    }\n\n    function heatmapChartsOptions (echartPanel) {\n        let seriesData = [];\n        let instances = _.chain(_.split(ctrl.panel.pingmesh.instances, ',')).map(ele => { return ele.replace(/ /g, '') }).value();\n        console.log('instances', instances)\n        let cache = {};\n\n        data.series.map(item => {\n            let metadata = item.data.pop()\n            // 只取过去一分钟的点实时展示\n            if ((new Date().getTime() - new Date(metadata.value[0].replace(/-/g, \"/\")).getTime()) / 1000 > 120) {\n                return\n            }\n            let value = metadata.value[1];\n            let isPingFail = false\n            if (_.startsWith(item.name, 'pingmesh_fail')) {\n                isPingFail = true\n            }\n            let jsonStrList = item.name.match(/({.*})/g)\n            if (jsonStrList.length < 1) { return }\n            let tags = {}\n            _.forEach(_.split(jsonStrList[0].replace(/{/g, '').replace(/}/g, '').replace(/\"/g, '').replace(/'/g, '').replace(/ /g, ''), ','), ele => {\n                let cur = _.split(ele, '=')\n                if (cur.length < 2) { return }\n                let port = _.split(cur[1], ':')\n                tags[cur[0]] = port[0]\n            })\n\n            let fromKey = 'instance'\n            let targetKey = 'target'\n\n            if (!_.has(cache, tags[fromKey])) {\n                cache[tags[fromKey]] = {}\n            }\n            if (isPingFail && value > 0) {\n                value = 10001\n            }\n            if (cache[tags[fromKey]][tags[targetKey]] > 10000) {\n                return\n            }\n            cache[tags[fromKey]][tags[targetKey]] = { 'tags': tags, 'value': value }\n        });\n\n        for (let i = 0; i < instances.length; i++) {\n            for (let j = 0; j < instances.length; j++) {\n                if (instances[i] === instances[j]) {\n                    seriesData.push({ value: [i, j, '-'], url: '' })\n                } else if (_.has(cache, instances[i]) && _.has(cache[instances[i]], instances[j])) {\n                    seriesData.push({\n                        value: [i, j, cache[instances[i]][instances[j]]['value']] || '-',\n                        url: 'http://' + cache[instances[i]][instances[j]]['tags']['instance'] + \":9115/probe?module=ping&target=\" + cache[instances[i]][instances[j]]['tags']['target']\n                    })\n                } else {\n                    seriesData.push({ value: [i, j, 0], url: 'http://' + instances[i] + \":9115/probe?module=ping&target=\" + instances[j] })\n                }\n            }\n        }\n        // console.log('cache', cache)\n        // console.log('seriesData', seriesData)\n        // console.log('ctrl.panel.pingmesh', ctrl.panel.pingmesh)\n\n        // seriesData = seriesData.map(function (item) {\n        //     return [item[1], item[0], item[2]];\n        // });\n        let option = {\n            tooltip: {                                        //4. modest a tooltip\n                show: ctrl.panel.label.show,\n                textStyle: {\n                    fontSize: ctrl.panel.label.fontSize\n                },\n                position: 'top',\n                padding: 5,\n                backgroundColor: '#52545c',\n                borderColor: '#777',\n                borderWidth: 1,\n                formatter: function (obj) {\n                    var value = obj.value;\n                    var fromKey = instances[value[0]];\n                    var targetKey = instances[value[1]];\n                    var fromInstance = '无';\n                    var targetInstance = '无';\n                    if (_.has(cache, fromKey) && _.has(cache[fromKey], targetKey)) {\n                        fromInstance = cache[fromKey][targetKey]['tags']['instance']\n                        fromInstance = fromInstance === undefined ? '无' : fromInstance\n                        targetInstance = cache[fromKey][targetKey]['tags']['target']\n                        targetInstance = targetInstance === undefined ? '无' : targetInstance\n                    }\n                    return 'Pingmesh: <br>' +\n                        '源IP: ' + fromInstance + '<br>' +\n                        '目标IP: ' + targetInstance + '<br>' +\n                        obj.marker + ' Value: ' + value[2] + '<br>';\n                },\n            },\n            animation: false,\n            grid: {\n                show: true,\n                left: '5%',\n                right: '5%',\n                top: '5%',\n                bottom: '10%'\n            },\n            xAxis: {\n                show: false,\n                name: '',\n                type: 'category',                            //5.modest the xAxis.\n                data: instances,\n                nameGap: 50,\n                splitArea: {\n                    show: true\n                },\n                // position: 'top',\n                nameLocation: 'middle',\n                nameTextStyle: {\n                    fontSize: 20\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: '#aaa'\n                    }\n                },\n                axisLabel: {\n                    rotate: 25,\n                    color: function (value, index) {\n                        return value >= 4 ? 'green' : 'black';\n                    }\n                }\n            },\n            yAxis: {\n                show: false,\n                name: '',                           //5.modest the yAxis.\n                type: 'category',\n                data: instances,\n                splitArea: {\n                    show: true\n                },\n                nameTextStyle: {\n                    color: '#aaa',\n                    fontSize: 20\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: '#aaa'\n                    }\n                },\n                axisLabel: {\n                    rotate: 25,\n                    color: function (value, index) {\n                        return value >= 4 ? 'green' : 'black';\n                    }\n                }\n            },\n            visualMap: [\n                {\n                    type: 'piecewise',\n                    calculable: true,\n                    orient: 'horizontal',\n                    left: 'center',\n                    bottom: '2%',\n                    splitNumber: 3,\n                    // borderColor:'#ccc',\n                    // borderWidth:1,\n                    textStyle: {\n                        fontStyle: 'oblique',\n                        fontWeight: 'bold'\n                    },\n                    pieces: [\n                        { lte: Number(ctrl.panel.pingmesh.delayValue), label: 'Ping通', color: ctrl.panel.pingmesh.okStatusColor },\n                        { gt: Number(ctrl.panel.pingmesh.delayValue), lte: 10000, label: '延时高', color: ctrl.panel.pingmesh.delayStatusColor },\n                        { gt: 10000, label: 'Ping失败', color: ctrl.panel.pingmesh.failStatusColor }\n                    ],\n                    hoverLink: true\n                }],\n            series: [{\n                name: 'Pingmesh',\n                type: 'heatmap',\n                data: seriesData,\n                label: {\n                    show: false  // 是否显示当前值\n                },\n                emphasis: {\n                    itemStyle: {\n                        shadowBlur: 10,\n                        shadowColor: 'rgba(0, 0, 0, 0.5)'\n                    }\n                }\n            }]\n        };\n        echartPanel.setOption(option, true);\n        echartPanel.on('click', e => { window.open(e.data.url) })\n        return option\n    }\n\n    function pieChartsOptions (echartPanel) {\n        let labelOptions;\n        let option = {\n            tooltip: {\n                trigger: 'item',\n                formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n            },\n            legend: {\n                type: 'scroll',\n                show: ctrl.panel.legend.show,\n                data: []\n            },\n            series: []\n        };\n\n        if (ctrl.panel.legend.position === \"top\") {\n            option.legend.top = 10;\n            option.legend.orient = \"horizontal\";\n        } else if (ctrl.panel.legend.position === \"bottom\") {\n            option.legend.bottom = 10;\n            option.legend.orient = \"horizontal\";\n        } else if (ctrl.panel.legend.position === \"right\") {\n            option.legend.right = 10;\n            option.legend.orient = \"vertical\";\n        }\n        let legendData = new Set();\n        let maxRadius;\n        if (ctrl.panel.label.show) {\n            maxRadius = 80;\n        } else {\n            maxRadius = 100;\n        }\n        data.series = data.series.slice(0, 5);\n        data.series.map((item, i) => {\n            let radius = [\n                maxRadius * (data.series.length - i - 1) / data.series.length + '%',\n                maxRadius * (data.series.length - i) / data.series.length * 0.9 + '%'\n            ];\n            let itemData = item.data.map(i => {\n                legendData.add(i.name);\n                return { name: i.name, value: i.value[1] }\n            });\n            if (i !== 0) {\n                labelOptions = {\n                    normal: {\n                        show: ctrl.panel.label.show,\n                        position: 'inner'\n                    }\n                }\n            } else {\n                labelOptions = {\n                    normal: {\n                        show: ctrl.panel.label.show,\n                        formatter: '{a|{a}}{abg|}\\n{hr|}\\n  {b|{b}：}{c}  {per|{d}%}  ',\n                        backgroundColor: '#eee',\n                        borderColor: '#aaa',\n                        borderWidth: 1,\n                        borderRadius: 4,\n                        rich: {\n                            a: {\n                                color: '#999',\n                                lineHeight: 22,\n                                align: 'center'\n                            },\n                            hr: {\n                                borderColor: '#aaa',\n                                width: '100%',\n                                borderWidth: 0.5,\n                                height: 0\n                            },\n                            b: {\n                                fontSize: 16,\n                                lineHeight: 33\n                            },\n                            per: {\n                                color: '#eee',\n                                backgroundColor: '#334455',\n                                padding: [2, 4],\n                                borderRadius: 2\n                            }\n                        }\n                    }\n                };\n            }\n            option.series.push({\n                name: item.name,\n                type: 'pie',\n                radius: radius,\n                label: labelOptions,\n                data: itemData\n            })\n        });\n        option.legend.data = Array.from(legendData);\n        return option;\n    }\n\n    function barChartsOptions (echartPanel) {\n        let option;\n\n        let labelOption = {\n            normal: {\n                position: 'insideBottom',\n                distance: 15,\n                align: 'left',\n                verticalAlign: 'middle',\n                rotate: 90,\n                formatter: '{c}  {a}',\n                fontSize: 12,\n                rich: {\n                    name: {\n                        textBorderColor: '#fff'\n                    }\n                }\n            }\n        };\n        if (ctrl.panel.show.label) {\n            labelOption.normal.show = ctrl.panel.label.show\n        }\n        console.log(data.textColor);\n        option = {\n            color: data.color,\n            legend: {\n                type: 'scroll',\n                show: ctrl.panel.legend.show,\n                textStyle: {\n                    color: data.textColor\n                }\n            },\n            tooltip: { // 图例\n                trigger: 'axis',\n                show: ctrl.panel.tooltip.show,\n                axisPointer: {\n                    type: 'shadow'\n                }\n            },\n            calculable: true,\n            xAxis: [\n                {\n                    type: 'category',\n                    axisTick: { show: false },\n                    data: data.metrics,\n                    axisLabel: {\n                        color: data.textColor,\n                        rotate: ctrl.panel.xlabel.rotate\n                    },\n                    nameTextStyle: {\n                        color: data.textColor,\n                    },\n                    axisLine: { lineStyle: { color: \"#999\" } },\n                    splitLine: { lineStyle: { color: \"#999\" } },\n                }\n            ],\n            yAxis: [\n                {\n                    type: 'value',\n                    axisLabel: { color: data.textColor },\n                    nameTextStyle: { color: data.textColor },\n                    axisLine: { lineStyle: { color: \"#999\" } },\n                    splitLine: { lineStyle: { color: \"#999\" } },\n                }\n            ],\n            grid: [{ \"borderColor\": \"#F00\", show: false },],\n            series: []\n        };\n        if (data.type) {\n            option.xAxis[0].type = data.type;\n        }\n        if (ctrl.panel.legend.position === \"top\") {\n            option.legend.top = 10;\n            option.legend.orient = \"horizontal\";\n        } else if (ctrl.panel.legend.position === \"bottom\") {\n            option.legend.bottom = 10;\n            option.legend.orient = \"horizontal\";\n        } else if (ctrl.panel.legend.position === \"right\") {\n            option.legend.right = 10;\n            option.legend.orient = \"vertical\";\n        }\n\n        data.series.map(item => {\n            option.series.push({\n                name: item.name,\n                stack: ctrl.panel.stack,\n                type: ctrl.panel.chartsType,\n                label: labelOption,\n\n                showSymbol: false,\n                hoverAnimation: false,\n                data: item.data\n            })\n        });\n        return option;\n    }\n\n    function render (incrementRenderCounter) {\n        if (!ctrl.data) {\n            return;\n        }\n        data = ctrl.data;\n        if (0 === ctrl.data.length) {\n            noDataPoints();\n        } else {\n            addecharts();\n        }\n        if (incrementRenderCounter) {\n            ctrl.renderingCompleted();\n        }\n    }\n}\n\n"],"file":"rendering.js"}